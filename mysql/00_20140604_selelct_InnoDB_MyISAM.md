MyISAM还是InnoDB
==================

MyISAM介绍
------------

## 每个MyISAM在磁盘上存储成三个文件。如表table对应table.frm（存储表结构）、table.MYD（存储表的数据）和table.MYI（存储标的索引信息）；
## 索引和数据是分离的，并且数据和索引都可以被压缩，提高内存使用率，加载更多的索引；
## 缓存在内存的是索引；
## 出巡数据相对较快，适合大量的SELECT，可以全文索引；
## 不支持事务，不支持外键；
## UPDATE时，进行表锁定，并发量较小；
## 更好和更快的AUTO_INCREMENT处理；

InnoDB介绍
-----------

## 支持事务，支持外键；
## 缓冲在内存的是数据，用内存空间换取时间；
## 索引和数据是紧密捆绑的，没有使用压缩，从而占用更大的存储空间；
## UPDATE操作时，是行锁定，可大大提高更新操作的并发，需要注意的是行锁定不是绝对的，基于主键操作时，才会行锁表，其他的依然是全表锁定，如"UPDATE `table` SET `field` = 'newValue' WHERE `field` LIKE '%a%'"；
## COUNT和ORDER BY操作时，会进行锁表；

针对某一具体操作时两者的差异
-------------------------------

## COUNT操作，MyISAM保存表的行数，而InnoDB不保存，所以"SELECT COUNT(*) FROM `table`"，MyISAM要比InnoDB快得多，但带上WHERE字句的COUNT时，两者执行的效率差不多；
## AUTO_INCREMENT，对于有AUTO_INCREMENT类型的字段，InnoDB中必须包含只有该字段的索引，而MyISAM支持其他索引及联合索引； 
## DELETE，针对"DELETE FROM `table`"，InnoDB是逐行删除，而MyISAM则是删除表，然后重新建立新表；
## LOAD TABLE FROM MASTER操作对InnoDB是不起作用的；
## 对于InnoDB来说，按照某列分表，想在单台服务器上提高性能是没有意义的；
## 插入的速度和查询的速度有时候是不可调和的矛盾；

从MyISAM和InnoDB做出选择的一些建议
------------------------------------

当我们需要从二者之中选择一个的时候，可以先考虑一下这些问题：

    * 你的数据库有外键吗？
    * 你需要事务支持吗？
    * 你需要全文索引吗？
    * 你的数据量有多大？
    * 你经常使用什么样的查询模式？

这些问题仅仅是为我们的选择提供一个参考，具体如何选择还是要结合具体的应用场景，因为具体的应用场景通常从各个因素中折衷一下，以便达到最佳的使用效果。

通常来说如果需要使用外键和事务支持的话，就会选择InnoDB，需要全文索引的时候，就选择MyISAM，但这不是绝对的。

数据量的大小，是一个影响你选择什么样存储引擎的重要因素，大尺寸的数据集趋向于选择InnoDB方式，因为其支持事务处理和故障恢复。数据库的在小决定了故障恢复的时间长短，InnoDB可以利用事务日志进行数据恢复，这会比较快。而MyISAM可能会需要几个小时甚至几天来干这些事，InnoDB只需要几分钟。

您操作数据库表的习惯可能也会是一个对性能影响很大的因素。比如： COUNT() 在 MyISAM 表中会非常快，而在InnoDB 表下可能会很痛苦。而主键查询则在InnoDB下会相当相当的快，但需要小心的是如果我们的主键太长了也会导致性能问题。大批的INSERT语句在MyISAM下会快一些，但是UPDATE在InnoDB 下会更快一些——尤其在并发量大的时候。

所以，到底你检使用哪一个呢？根据经验来看，如果是一些小型的应用或项目，那么MyISAM 也许会更适合。当然，在大型的环境下使用MyISAM 也会有很大成功的时候，但却不总是这样的。如果你正在计划使用一个超大数据量的项目，而且需要事务处理或外键支持，那么你真的应该直接使用InnoDB方式。但需要记住InnoDB 的表需要更多的内存和存储，转换100GB 的MyISAM 表到InnoDB 表可能会让你有非常坏的体验。

两种类型最主要的差别就是Innodb支持事务处理与外键和行级锁，而MyISAM不支持，所以MyISAM往往就容易被人认为只适合在小项目中使用。

